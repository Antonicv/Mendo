jQuery(function($){
		
  google.maps.event.addDomListener(window, 'load', function(){

    $('.sppb-addon-gmap-canvas').each(function(index){
      var mapId = 'sppb-addon-gmap' + (index + 1);
      var self = this;

      $(this).attr('id', mapId);

      // Get data
      var zoom = $(self).data('mapzoom');
      var mousescroll = $(self).data('mousescroll');
	  var map_type_control = $(self).data('map_type_control');
	  var street_view_control = $(self).data('street_view_control');


      var latlng = new google.maps.LatLng($(self).data('lat'), $(self).data('lng'));
      var mapOptions = {
        zoom: zoom,
        center: latlng,
        //disableDefaultUI: true,
		panControl: false,
       	zoomControl: false,
		scaleControl: false,
		overviewMapControl: false,
		mapTypeControl: map_type_control,
		streetViewControl: street_view_control,
        scrollwheel: mousescroll
      };
      
		//google map custom marker icon - .png fallback for IE11
	  var is_internetExplorer11= navigator.userAgent.toLowerCase().indexOf('trident') > -1;
	  var marker_url = ( is_internetExplorer11 ) ? 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAwZJREFUeNrsWM9rE0EUfkl082vbbppoi5qqVXq24FksehSbQkHw1PwDhf4Fba9ekvbmqblYWigYRXrwYsCDBgUDlYL14KIhUoxJWkJLDQXf1NcQ2qbdmZ1JVsgHj9lkZ2fem/e9eTMPoIMOOviv4ZI10O/JSQObGMooCnu+2/A6g1JBeYGSDs/PVxxjACp+DZtplAmOz1Ios2iI2VYDUPkZUl4UzIiZlhtAdHl+hCaiYPQaE6WVS1D5Nyi3JMZiDmVExAi3wGQJycoDjZdQ7gFc/RhRRxUYldIqPZAAtUgo8wCuPtsmF6z0LWxvw9diEf7s7x/8vhEOw2Bvr9Wp4uiFlAoPjFrptIGKvzVNqOGzpmng8njgQz4PH1FkznOIcxx9Y2d12K3V4PPmJlyNRMDt+udcP4ru88G3UunAEyG/3/Y83B5A+lja73/t7IARDNaVr0+Cvy8ZBvzY2gKZ84luo03hQUV1r/fEd+eRSkGklGxINSCCq38arvT0ONsAL65yfxMj2P/svWxYDWLLKX6guxs8bjcUMR72cBtlSkcCAbis6zx6WZ6PJw+U6ZyvGhXMAyEVFEpDa6DsKDHXIgPmlBiAbs3R2V0lMjSPsl1oVrEB3ONzGYCrk1HohQyNrzwPxBUZIDQutwFUSZBNJeEKhWgmTqKYkpQ3abzWHSXo8i2LSnE7hS7hsxAFXNKm8kmRwLVVVjnhiPFJsEqRQ+WHnXAajfMcvhoOa1IoaNsAypxTnJ9N8WZcpfcBqiJYrSSkeKoOymOAMx6k8F7ZjQwxcko8VOi9VMi647HLbuhJNmtcDATeD/f1PTraYWFt7fH95eUqPmo0754TDOhHuY7Cym7szqi9Ns3KnWj0Z7Srq77a7wqF6YnV1Swpz/qxG9cFYkC1XQbcJMWP0XBxff3L2NCQK+z3394ol5/eW1p61oS+OkmpHUF8ZvJ6NT7+8MHKyksrSa0dBrDVH5BA4+92PGCHQrvEXzaGT+B7VmfMU+uIPHDIZ2hoG1FtaKvQQQfOwF8BBgDxH83QBhaC5gAAAABJRU5ErkJggg==' : 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImdtYXBfbWFya2VyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDhweCIgaGVpZ2h0PSI0OHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDQ4IDQ4IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImdtYXBfbWFya2VyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDhweCIgaGVpZ2h0PSI0OHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDQ4IDQ4IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImdtYXBfbWFya2VyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNDhweCIgaGVpZ2h0PSI0OHB4IiB2aWV3Qm'... (truncated for brevity)
